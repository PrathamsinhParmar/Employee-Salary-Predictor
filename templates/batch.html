<!DOCTYPE html>
<html>
<head>
    <title>Batch Prediction</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background: #f9fafb; }
        .container { max-width:520px; margin:2em auto; background: #fff; border-radius:12px; box-shadow: 0 2px 14px #b3d1ee2a; padding: 2em 2.5em;}
        h2 { color: #2d507c; margin-bottom: 1em; }
        input[type=file], button { margin-top: 1.1em; font-family:'Outfit',sans-serif;}
        .result { margin:1em 0 0 0; padding:0.8em; background:#1976d2; color:#fff; font-size:1em; border-radius:8px;}
        .nav { margin-bottom: 1em; text-align:right; }
        .nav a { color:#417eda; text-decoration:none; font-size:1em; font-weight:600;}
        table { border-collapse: collapse; width:100%; margin-top:1em; font-size:0.98em;}
        td,th { border:1px solid #dfe7ef; padding:0.3em 0.7em;}
        th { background: #e3f0fa;}
    </style>
</head>
<body>
  <div class="container">
    <div class="nav"><a href="/">Single Prediction</a></div>
    <h2>ðŸ“‚ Batch Prediction</h2>
    <form method="POST" enctype="multipart/form-data">
      <label>Upload CSV file for batch prediction:</label>
      <input type="file" name="batchfile" accept=".csv" required>
      <button type="submit">Upload and Predict</button>
    </form>
    {% if batch_data is not none and preds_present %}
      <div class="result">âœ… Predictions (preview):</div>
      <div style="overflow-x:auto;">
        {{ batch_data.head(8).to_html(index=False) | safe }}
      </div>
      <a href="{{ url_for('download', file=csv_download_path) }}" style="display:inline-block; margin:1em 0;color:#1976d2; font-weight:600;">Download Predictions CSV</a>
    {% endif %}
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul style="color:#d32f2f;">
            {% for message in messages %}
            <li>{{ message }}</li>
            {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
  </div>
</body>
</html>
